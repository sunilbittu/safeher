<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SafeHer Web App</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;800&display=swap" rel="stylesheet">

  <!-- âœ… Single Correct Style Block -->
  <style>
    body {
      font-family: 'Inter', sans-serif;
      -webkit-tap-highlight-color: transparent;
    }

    @keyframes fade-in {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    .animate-fade-in {
      animation: fade-in 0.5s ease-in-out;
    }

    @keyframes ping-slow {
      75%, 100% {
        transform: scale(2);
        opacity: 0;
      }
    }
    .animate-ping-slow {
      animation: ping-slow 2s cubic-bezier(0, 0, 0.2, 1) infinite;
    }

    @keyframes pulse-fast {
      0%, 100% { opacity: 1; }
      50% { opacity: .5; }
    }
    .animate-pulse-fast {
      animation: pulse-fast 1.5s cubic-bezier(0.4, 0, 0.6, 1) infinite;
    }

    /* ğŸ‘‡ Added animation for Fake Call */
    @keyframes fadeIn {
      from { opacity: 0; transform: scale(0.9); }
      to { opacity: 1; transform: scale(1); }
    }
    .animate-fadeIn {
      animation: fadeIn 0.4s ease-out;
    }
  </style>
</head>

<body class="bg-black">
  
  <div class="max-w-md mx-auto h-screen bg-gray-900 shadow-2xl flex flex-col relative overflow-hidden">
    <main id="main-content" class="flex-grow overflow-y-auto">

      <!-- 1. Splash Screen -->
      <div id="splash-screen" class="flex flex-col items-center justify-center h-full text-center bg-black text-white p-8 animate-fade-in">
        <svg class="w-24 h-24 text-purple-500 mb-6" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
          <path d="M12 1.999c-2.484 0-4.5 2.015-4.5 4.5v3h-1.5c-.827 0-1.5.673-1.5 1.5v9c0 .827.673 1.5 1.5 1.5h12c.827 0 1.5-.673 1.5-1.5v-9c0-.827-.673-1.5-1.5-1.5h-1.5v-3c0-2.485-2.016-4.5-4.5-4.5zm0 1.5c1.657 0 3 1.343 3 3v3h-6v-3c0-1.657 1.343-3 3-3zm-5.25 9h10.5v7.5h-10.5z" />
        </svg>
        <h1 class="text-5xl font-bold tracking-wider">SafeHer</h1>
        <p class="text-purple-300 mt-4 text-sm max-w-xs">
          Invisible Triggers. Real-Time Help. Unbreakable Evidence.
        </p>
      </div>

      <!-- 2. Login Screen (hidden by default) -->
      <div id="login-screen" class="hidden flex flex-col items-center justify-center h-full bg-black text-white p-8">
        <svg class="w-20 h-20 text-purple-500 mb-8" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 1.999c-2.484 0-4.5 2.015-4.5 4.5v3h-1.5c-.827 0-1.5.673-1.5 1.5v9c0 .827.673 1.5 1.5 1.5h12c.827 0 1.5-.673 1.5-1.5v-9c0-.827-.673-1.5-1.5-1.5h-1.5v-3c0-2.485-2.016-4.5-4.5-4.5zm0 1.5c1.657 0 3 1.343 3 3v3h-6v-3c0-1.657 1.343-3 3-3zm-5.25 9h10.5v7.5h-10.5z" /></svg>
        <h2 class="text-3xl font-bold mb-2">Welcome Back</h2>
        <p class="text-gray-400 mb-10">Login or continue as a guest.</p>
        <div class="w-full max-w-sm">
          <div class="relative mb-6">
             <svg class="absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth="1.5" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" d="M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 002.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 01-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 00-1.091-.852H4.5A2.25 2.25 0 002.25 6.75z" /></svg>
            <input type="tel" placeholder="Phone Number" class="w-full bg-gray-900 border border-gray-700 rounded-lg py-3 pl-10 pr-4 focus:outline-none focus:ring-2 focus:ring-purple-500"/>
          </div>
          <button onclick="handleLogin()" class="w-full bg-purple-600 hover:bg-purple-700 text-white font-bold py-3 px-4 rounded-lg transition-colors duration-300">
            Send OTP
          </button>
          <button onclick="continueAsGuest()" class="w-full mt-4 bg-gray-800 hover:bg-gray-700 text-gray-300 font-bold py-3 px-4 rounded-lg transition-colors duration-300">
            Continue as Guest
          </button>
        </div>
      </div>

      <!-- 3. Home Screen (hidden by default) -->
      <div id="home-screen" class="hidden h-full bg-gray-900 text-white flex flex-col p-4 pt-8">
        <header class="px-2">
          <h1 class="text-3xl font-bold">Dashboard</h1>
          <p class="text-purple-300">Stay safe and connected.</p>
        </header>
        <main class="flex-grow flex flex-col justify-center items-center gap-8 py-8">
          <div class="relative">
            <button onclick="navigateTo('sos-screen')" class="w-48 h-48 bg-purple-600 rounded-full flex items-center justify-center text-white text-3xl font-bold shadow-2xl shadow-purple-900/50 transition-transform duration-200 ease-in-out hover:scale-105 active:scale-95 z-10">
              SOS
            </button>
            <div class="absolute inset-0 bg-purple-500/30 rounded-full animate-ping-slow -z-0"></div>
          </div>
          <div class="grid grid-cols-2 gap-4 w-full max-w-md">
            <div class="bg-gray-800 p-4 rounded-lg text-center cursor-pointer hover:bg-gray-700" onclick="triggerFakeCall()">ğŸ”Š<span class="ml-2 font-semibold">Fake Call</span></div>
            <div class="bg-gray-800 p-4 rounded-lg text-center cursor-pointer hover:bg-gray-700" onclick="shareLocationAndSafeRoute()">ğŸ“<span class="ml-2 font-semibold">Share Location</span></div>
            <div onclick="navigateTo('evidence-screen')" class="bg-gray-800 p-4 rounded-lg text-center cursor-pointer hover:bg-gray-700">ğŸ”—<span class="ml-2 font-semibold">Evidence Vault</span></div>
            <div class="bg-gray-800 p-4 rounded-lg text-center cursor-pointer hover:bg-gray-700" onclick="showCommunity()">ğŸ›¡ï¸<span class="ml-2 font-semibold">Community</span></div>
          </div>
        </main>
        <div class="bg-red-500/20 border border-red-500 text-red-300 px-4 py-2 rounded-lg text-sm text-center mb-4">
          ğŸ¤– <span class="font-semibold">AI Risk Detection:</span> High-risk area detected.
        </div>
      </div>

      <!-- 4. Emergency Alert Screen (hidden by default) -->
      <div id="sos-screen" class="hidden flex flex-col items-center justify-center h-full bg-black text-white text-center p-8 animate-fade-in">
        <div class="relative w-64 h-64 flex items-center justify-center">
          <div class="absolute inset-0 bg-red-600 rounded-full animate-pulse-fast"></div>
          <div id="sos-content" class="relative z-10">
            <!-- Content is injected by JavaScript -->
          </div>
        </div>
        <p id="sos-message" class="text-gray-300 mt-8 text-lg">Activating alert...</p>
        <button id="cancel-sos-button" onclick="navigateTo('home-screen')" class="mt-8 bg-gray-700 hover:bg-gray-600 text-white font-bold py-3 px-8 rounded-full transition-colors">
          Cancel
        </button>
      </div>

      <!-- 5. Evidence Vault Screen (hidden by default) -->
      <div id="evidence-screen" class="hidden h-full bg-gray-900 text-white p-4 pt-8">
        <header class="px-2 mb-6">
          <h1 class="text-3xl font-bold">Evidence Vault</h1>
          <p class="text-purple-300">Your secured and verified media files.</p>
        </header>
        <div class="grid grid-cols-2 sm:grid-cols-3 gap-4">
          <div class="bg-gray-800 p-4 rounded-lg flex flex-col items-start aspect-square justify-between hover:bg-gray-700 cursor-pointer"><div><div class="text-4xl">ğŸ“·</div><h3 class="font-bold mt-2">Photo</h3><p class="text-xs text-gray-400">Oct 06, 2025</p></div><div class="self-end text-purple-400"><svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 1a4.5 4.5 0 00-4.5 4.5V9H5a2 2 0 00-2 2v6a2 2 0 002 2h10a2 2 0 002-2v-6a2 2 0 00-2-2h-.5V5.5A4.5 4.5 0 0010 1zm3 8V5.5a3 3 0 10-6 0V9h6z" clip-rule="evenodd" /></svg></div></div>
          <div class="bg-gray-800 p-4 rounded-lg flex flex-col items-start aspect-square justify-between hover:bg-gray-700 cursor-pointer"><div><div class="text-4xl">ğŸ¤</div><h3 class="font-bold mt-2">Audio</h3><p class="text-xs text-gray-400">Oct 05, 2025</p></div><div class="self-end text-purple-400"><svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 1a4.5 4.5 0 00-4.5 4.5V9H5a2 2 0 00-2 2v6a2 2 0 002 2h10a2 2 0 002-2v-6a2 2 0 00-2-2h-.5V5.5A4.5 4.5 0 0010 1zm3 8V5.5a3 3 0 10-6 0V9h6z" clip-rule="evenodd" /></svg></div></div>
          <div class="bg-gray-800 p-4 rounded-lg flex flex-col items-start aspect-square justify-between hover:bg-gray-700 cursor-pointer"><div><div class="text-4xl">ğŸ’¬</div><h3 class="font-bold mt-2">Chat Log</h3><p class="text-xs text-gray-400">Oct 04, 2025</p></div><div class="self-end text-purple-400"><svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 1a4.5 4.5 0 00-4.5 4.5V9H5a2 2 0 00-2 2v6a2 2 0 002 2h10a2 2 0 002-2v-6a2 2 0 00-2-2h-.5V5.5A4.5 4.5 0 0010 1zm3 8V5.5a3 3 0 10-6 0V9h6z" clip-rule="evenodd" /></svg></div></div>
          <div class="bg-gray-800 p-4 rounded-lg flex flex-col items-start aspect-square justify-between hover:bg-gray-700 cursor-pointer"><div><div class="text-4xl">ğŸ“·</div><h3 class="font-bold mt-2">Photo</h3><p class="text-xs text-gray-400">Oct 03, 2025</p></div><div class="self-end text-purple-400"><svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 1a4.5 4.5 0 00-4.5 4.5V9H5a2 2 0 00-2 2v6a2 2 0 002 2h10a2 2 0 002-2v-6a2 2 0 00-2-2h-.5V5.5A4.5 4.5 0 0010 1zm3 8V5.5a3 3 0 10-6 0V9h6z" clip-rule="evenodd" /></svg></div></div>
          <div class="bg-gray-800 p-4 rounded-lg flex flex-col items-start aspect-square justify-between hover:bg-gray-700 cursor-pointer"><div><div class="text-4xl">ğŸ“¹</div><h3 class="font-bold mt-2">Video</h3><p class="text-xs text-gray-400">Oct 02, 2025</p></div><div class="self-end text-purple-400"><svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 1a4.5 4.5 0 00-4.5 4.5V9H5a2 2 0 00-2 2v6a2 2 0 002 2h10a2 2 0 002-2v-6a2 2 0 00-2-2h-.5V5.5A4.5 4.5 0 0010 1zm3 8V5.5a3 3 0 10-6 0V9h6z" clip-rule="evenodd" /></svg></div></div>
          <div class="bg-gray-800 p-4 rounded-lg flex flex-col items-start aspect-square justify-between hover:bg-gray-700 cursor-pointer"><div><div class="text-4xl">ğŸ¤</div><h3 class="font-bold mt-2">Audio</h3><p class="text-xs text-gray-400">Oct 01, 2025</p></div><div class="self-end text-purple-400"><svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 1a4.5 4.5 0 00-4.5 4.5V9H5a2 2 0 00-2 2v6a2 2 0 002 2h10a2 2 0 002-2v-6a2 2 0 00-2-2h-.5V5.5A4.5 4.5 0 0010 1zm3 8V5.5a3 3 0 10-6 0V9h6z" clip-rule="evenodd" /></svg></div></div>
        </div>
      </div>

      <!-- 6. Settings Screen (hidden by default) -->
      <div id="settings-screen" class="hidden h-full bg-gray-900 text-white p-4 pt-8">
        <header class="px-2 mb-6">
          <h1 class="text-3xl font-bold">Settings & Profile</h1>
          <p class="text-purple-300">Manage your preferences and network.</p>
        </header>
        <div class="space-y-6">
          <div>
            <h2 class="text-xl font-semibold text-purple-300 mb-3">Trusted Emergency Network</h2>
            <div class="bg-gray-800 rounded-lg">
              <div class="flex items-center justify-between p-4 border-b border-gray-700"><div class="flex items-center"><span class="text-2xl mr-4">ğŸ‘®</span><div><p class="font-semibold">Nearby Police Stations</p><p class="text-xs text-gray-400">Auto-detected</p></div></div><svg class="w-5 h-5 text-gray-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5" /></svg></div>
              <div class="flex items-center justify-between p-4 border-b border-gray-700"><div class="flex items-center"><span class="text-2xl mr-4">ğŸ‘©â€âœˆï¸</span><div><p class="font-semibold">She Teams</p><p class="text-xs text-gray-400">Official Link</p></div></div><svg class="w-5 h-5 text-gray-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5" /></svg></div>
              <div class="flex items-center justify-between p-4 border-b border-gray-700"><div class="flex items-center"><span class="text-2xl mr-4">ğŸ¤</span><div><p class="font-semibold">Verified Volunteers</p><p class="text-xs text-gray-400">Local Helpers</p></div></div><svg class="w-5 h-5 text-gray-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5" /></svg></div>
              <div class="flex items-center justify-between p-4"><div class="flex items-center"><span class="text-2xl mr-4">ğŸ³ï¸â€âš§ï¸</span><div><p class="font-semibold">Trained Transgenders</p><p class="text-xs text-gray-400">Community Responders</p></div></div><svg class="w-5 h-5 text-gray-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5" /></svg></div>
            </div>
            <button class="w-full mt-3 bg-purple-600/80 hover:bg-purple-600 text-white font-bold py-3 px-4 rounded-lg transition-colors">â• Add Personal Contact</button>
          </div>
          <div>
            <h2 class="text-xl font-semibold text-purple-300 mb-3">Preferences</h2>
            <div class="bg-gray-800 rounded-lg divide-y divide-gray-700">
              <div class="flex items-center justify-between p-4"><div><p class="font-semibold">Invisible Gestures</p><p class="text-xs text-gray-400">Shake or button press for SOS</p></div><label class="relative inline-flex items-center cursor-pointer"><input type="checkbox" value="" class="sr-only peer" checked><div class="w-11 h-6 bg-gray-600 rounded-full peer peer-focus:ring-2 peer-focus:ring-purple-500 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"></div></label></div>
              <div class="flex items-center justify-between p-4"><div><p class="font-semibold">Safe Zones</p><p class="text-xs text-gray-400">Manage home, work, etc.</p></div><svg class="w-5 h-5 text-gray-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5" /></svg></div>
              <div class="flex items-center justify-between p-4"><p class="font-semibold">Theme</p><div class="flex items-center gap-2"><button class="font-bold py-1 px-3 rounded-full bg-purple-600 text-white">Dark</button><button class="font-bold py-1 px-3 rounded-full bg-gray-700 text-gray-300">Light</button></div></div>
            </div>
          </div>
        </div>
      </div>
    </main>
    <nav id="bottom-nav" class="hidden w-full bg-black/50 backdrop-blur-sm border-t border-purple-900/50 p-2 flex justify-around">
      <button id="nav-home" onclick="navigateTo('home-screen')" class="flex flex-col items-center gap-1 p-2 rounded-lg w-24 text-purple-400">
        <svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z" /></svg>
        <span class="text-xs font-bold">Home</span>
      </button>
      <button id="nav-evidence" onclick="navigateTo('evidence-screen')" class="flex flex-col items-center gap-1 p-2 rounded-lg w-24 text-gray-500">
        <svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M5 4h14c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H5c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2zm0 2v12h14V6H5zm5 2h4v2h-4V8zm-2 4h8v2H8v-2zm2 4h4v2h-4v-2z" /></svg>
        <span class="text-xs font-bold">Evidence</span>
      </button>
      <button id="nav-settings" onclick="navigateTo('settings-screen')" class="flex flex-col items-center gap-1 p-2 rounded-lg w-24 text-gray-500">
        <svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M19.43 12.98c.04-.32.07-.64.07-.98s-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.3-.61-.22l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65C14.46 2.18 14.25 2 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1c-.23-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98s.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.23.09.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65zM12 15.5c-1.93 0-3.5-1.57-3.5-3.5s1.57-3.5 3.5-3.5 3.5 1.57 3.5 3.5-1.57 3.5-3.5 3.5z" /></svg>
        <span class="text-xs font-bold">Settings</span>
      </button>
    </nav>
  </div>

  <!-- Load JavaScript Modules -->
  <script src="js/config.js"></script>
  <script src="js/utils.js"></script>
  <script src="js/db.js"></script>
  <script src="js/api.js"></script>
  <script src="js/modules/user.js"></script>
  <script src="js/modules/preferences.js"></script>
  <script src="js/modules/evidence.js"></script>
  <script src="js/modules/sos.js"></script>
  <script src="js/modules/location.js"></script>
  <script src="js/modules/contacts.js"></script>
  <script src="js/modules/fakeCall.js"></script>
  <script src="js/modules/community.js"></script>
  <script src="js/modules/navigation.js"></script>
  <script src="js/app.js"></script>

  <!-- Old inline scripts removed - now using modular JavaScript files above -->
  </script>
</body>
</html>
